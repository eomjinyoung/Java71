<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>
<h1>AJAX 단계4</h1>
<textarea id='ta' rows='10' cols='60'></textarea>

<h1>test..ok</h1>

<script type="text/javascript">
/* AJAX 단계4: 동기 방식의 문제점 해결2
      => 서버에 요청하는 것을 비동기 방식으로 처리한다.
 */
 
var xhr = new XMLHttpRequest(); 
xhr.onreadystatechange = function() {
	// 이 함수는 XHR의 작업 상태가 바뀔 때마다 호출된다.
	// 작업 상태를 알고 싶으면 readyState 변수의 값을 확인하라
	// 1: 서버에 연결했다
	// 2: 서버에 요청을 보냈다.
	// 3: 서버에서 응답을 받고 있다.
	// 4: 서버로부터 응답을 모두 받았다.
	console.log(xhr.readyState);
	if (xhr.readyState == 4) {
		var ta = document.getElementById('ta');
		ta.value = "===>" + xhr.responseText;
	}
};
xhr.open("GET", "boardlist.jsp", true); // 세 번째 인자 값을 true로 한다.
xhr.send(); // 서버에 요청하는 즉시 리턴한다.

// 다음의 문장은 의미가 없다.
// 왜? 서버에서 응답을 받기 전에 responseText를 사용하기 때문이다.
/*
var ta = document.getElementById('ta');
ta.value = "===>" + xhr.responseText;
*/
</script>


</body>
</html>













